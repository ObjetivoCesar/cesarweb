"use client"

import { useState, useEffect } from "react"
import Link from "next/link"
import { Menu, X, Search, ChevronDown, ChevronRight } from "lucide-react"
import { usePathname } from "next/navigation"
import serviciosData from "@/data/servicios.json"

// Componente separado para la barra superior
function TopBar() {
{{ ... }}
  const pathname = usePathname()
  const [isHovering, setIsHovering] = useState(false)
  const [closeTimeout, setCloseTimeout] = useState<NodeJS.Timeout | null>(null)

  // Obtener servicios del archivo JSON
  const services = serviciosData.categorias.map(service => ({
    name: service.titulo,
    href: `/servicios/${service.slug}`,
    descripcion: service.descripcionCorta
  }))

  // Limpiar timeouts al desmontar
  useEffect(() => {
    return () => {
      if (closeTimeout) clearTimeout(closeTimeout)
{{ ... }}
                  }
                }}
              >
                <span className="mr-1">Servicios</span>
                <ChevronDown className={`w-4 h-4 transition-transform ${isServicesOpen ? 'rotate-180' : ''} group-hover:rotate-180`} />
              </button>
              {isServicesOpen && (
                <div 
                  className="absolute top-full left-0 mt-2 w-80 bg-white rounded-lg shadow-xl py-2 z-50 overflow-hidden border border-gray-100"
                  onMouseEnter={handleMenuMouseEnter}
                  onMouseLeave={handleMenuMouseLeave}
                >
                  <div className="px-4 py-2 bg-gray-50 border-b">
                    <h4 className="font-semibold text-gray-700">Nuestros Servicios</h4>
                    <p className="text-xs text-gray-500">Soluciones a medida para tu negocio</p>
                  </div>
                  <div className="divide-y divide-gray-100">
                    {services.map((item) => (
                      <Link
                        key={item.href}
                        href={item.href}
                        className="block px-4 py-3 hover:bg-blue-50 group transition-colors"
                      >
                        <div className="font-medium text-gray-900 group-hover:text-blue-600">
                          {item.name}
                        </div>
                        <div className="text-sm text-gray-500 line-clamp-1">
                          {item.descripcion}
                        </div>
                      </Link>
                    ))}
                  </div>
                  <div className="px-4 py-2 bg-gray-50 border-t">
                    <Link 
                      href="/servicios" 
                      className="text-sm font-medium text-blue-600 hover:text-blue-800 flex items-center justify-between"
                    >
                      Ver todos los servicios
                      <ChevronRight className="w-4 h-4" />
                    </Link>
                  </div>
                </div>
              )}
            </div>
            {isMobileServicesOpen && (
              <div className="mt-2 space-y-1 pl-4 bg-gray-800/90 rounded-md py-2">
                {services.map((service) => (
                  <Link
                    key={service.href}
                    href={service.href}
                    className="block py-2 text-white hover:text-gray-200"
                    onClick={() => {
                      setIsMenuOpen(false)
                      setIsMobileServicesOpen(false)
                    }}
                  >
                    <div className="font-medium">{service.name}</div>
                    <div className="text-sm text-gray-500 line-clamp-1">{service.descripcion}</div>
                  </Link>
                ))}
                <Link
                  href="/servicios"
                  className="block py-2 text-blue-600 font-medium hover:bg-blue-50 -mx-3 px-3 rounded text-sm mt-2"
                  onClick={() => {
                    setIsMenuOpen(false)
                    setIsMobileServicesOpen(false)
                  }}
                >
                  Ver todos los servicios â†’
                </Link>
              </div>
            )}
          </div>
  return (
    <>
      <TopBar />
      <NavigationHeader />
    </>
  )
} 